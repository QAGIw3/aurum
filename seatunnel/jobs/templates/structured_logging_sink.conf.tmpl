sink {
  Kafka {
    bootstrap.servers = "${AURUM_KAFKA_BOOTSTRAP_SERVERS}"
    topic = "${LOGGING_TOPIC:-aurum.ops.logs}"
    producer {
      acks = "all"
      enable.idempotence = true
      max.in.flight.requests.per.connection = 1
      linger.ms = 100
      batch.size = 16384
      retries = 10
      retry.backoff.ms = 100
      retry.backoff.max.ms = 10000
      delivery.timeout.ms = 60000
      request.timeout.ms = 30000
      compression.type = "lz4"
    }
    json {
      # Log message will be injected via transform
      output_mode = "DYNAMIC"
    }
    result_table_name = "structured_logs"
  }
}
